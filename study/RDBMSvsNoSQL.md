## 프로젝트에 적합한 DB 결정하기 위해 간단한 비교해 보기
[참조1](https://khj93.tistory.com/entry/Database-RDBMS%EC%99%80-NOSQL-%EC%B0%A8%EC%9D%B4%EC%A0%90)
[참조2](https://github.com/gyoogle/tech-interview-for-developer/blob/master/Computer%20Science/Database/SQL%EA%B3%BC%20NOSQL%EC%9D%98%20%EC%B0%A8%EC%9D%B4.md)
[참조3](https://velog.io/@yejinh/%EB%8D%B0%EC%9D%B4%ED%84%B0%EB%B2%A0%EC%9D%B4%EC%8A%A4-SQL-NoSQL-pkk4zdy3au)
[참조4](https://dailyscat.gitbook.io/twis/database/nosql-1)
### Database와 DBMS 그리고 SQL
Databse란 일반적으로 컴퓨터 시스템에 전자 방식으로 저장된 구조화된 정보 또는 데이터의 체계적인 집합을 의미합니다.

DBMS란(DataBase Management System) 사용자와 데이터베이스 사이에서 사용자의 요구에 따라 정보를 생성해 주고 데이터베이스를 관리해 주는 소프트웨어입니다.

SQL이란(Strucured Query Language) 관계형 데이터베이스 관리 시스템의 데이터를 관리하기 위해 설계된 특수 목적의 프로그래밍 언어
- 관계형 데이터베이스 관리 시스템에서 자료의 검색과 관리
- 데이터베이스 스키마 생성과 수정
- 데이터베이스 객체 접근 조정 관리


보통 Spring에서 개발할 때는 MySQL을, Node.js에서는 MongoDB를 주로 사용했을 것이다.

하지만 그냥 단순히 프레임워크에 따라 결정하는 것이 아니다.

### SQL

- 데이터는 테이블에 레코드로 저장되는데, 각 테이블마다 명확하게 정의된 구조가 있다. 해당 구조는 필드의 이름과 데이터 유형으로 정의
- 스키마를 준수하지 않은 레코드는 테이블에 추가할 수 없다
- 데이터의 중복을 피하기 위해 '관계'를 이용
- 데이터베이스 트랜잭션이 정상적으로 처리되기 위한 4가지 필수 속성이 있다. (ACID)

장점
- 명확하게 정의된 스키마, 데이터 무결성 보장
- 관계는 각 데이터를 중복없이 한번만 저장
- 복잡한 질의에 적합
  - 원하는 형태의 데이터 결과 생성 가능
- 관계를 맺고 있는 데이터가 자주 변경되는 애플리케이션의 경우
  - NoSQL에서는 여러 컬렉션을 모두 수정해야 하기 때문에 비효율적
- 보안
  - 특정 IP 또는 IP 대역에 대해 접근 제한 가능
  - 사용자 계정을 관리해 특정 권한만 부여 가능
- 트랜잭션을 지원하여 데이터 정합성 보장
- 트랜잭션 3요소에 적합
단점
- 데이터 스키마를 사전에 계획하고 알려야 함. (나중에 수정하기 힘듦)
- 관계를 맺고 있어서 조인문이 많은 복잡한 쿼리가 만들어질 수 있음
- 대체로 수직적 확장만 가능함
- nosql은 ACID 네가지 속성을 과감히 버리고 에릭 브레워의 CAP정리에 기반을 둔다.
  - CAP
    - Consistency: 모든 노드가 동시에 동일한 데이터를 조회함을 보장
    - Availability: 성공 또는 실패를 막론하고 모든 요청에 대한 응답을 보장
    - Partition Tolerance: 미리 예측할 수 없는 데이터 손실 또는 시스템 구성 요소 중 일부의 실패(Failure)에도 전체 시스템은 항상 정상 작동을 보장
  - 하나의 공유된 데이터 시스템은 이 중 최대 2개의 CAP 속성만 만족할 수 있다
  - CP에 Redis, MongoDB 등

### NoSQL

- NoSQL에서는 레코드를 문서(documents)라고 부른다.
- 스키마도 없고, 관계도 없다!
- 다른 구조의 데이터를 같은 컬렉션에 추가가 가능
장점
- 스키마가 없어서 유연함. 언제든지 저장된 데이터를 조정하고 새로운 필드 추가 가능
- 데이터는 애플리케이션이 필요로 하는 형식으로 저장됨. 데이터 읽어오는 속도 빨라짐
단점
- 복잡한 질의에 부적합
  - aggregation 사용해야 되는데 성능 안 좋음.
- 데이터 중복을 계속 업데이트해야 함.
- 데이터가 여러 컬렉션에 중복되어 있기 때문에 수정 시 모든 컬렉션에서 수행해야 함 (SQL에서는 중복 데이터가 없으므로 한번만 수행이 가능)

### 결제 내역 페이지 구축에서
들어오는 데이터 형식 : JSON
수행해야 하는 작업 : 결제 내역 페이지 보여 주기
- 가장 바깥 페이지 : 기본은 날짜 순으로 결제 내역 리스트
  - 결제 진행 중, 결제 대기 중, 결제 완료, 배송 확인, 구매 완료, 취소, 반품, 교환, 결제처리중 오류 등등
    - 해당 데이터만 필터링 가능한 옵션
  - 구매 날짜, 이름, 업체명, 업체 링크, 번호 등
  
- 제목 링크 선택 시 : 주문 상세 정보
  - 주문 일자, 주문 번호, 상품 정보 링크, 결제 정보 등
  

### 결론
- 트랜잭션 3요소를 잘 활용하려면 RDBMS가 유리(이유 필요)
- 데이터 무결성 보장해야 되기 때문에 RDBMS 사용
  - NoSQL은 CAP 중 한 가지는 희생해야 되기 때문에 CAP가 모두 필요한 결제내역 페이지에 부적합

- 네이버 셰어 강의 레퍼런스로 MySQL 참조하고 둘 다 만들어 보기에는 물리적 시간 
등의 이유로 우선 MySQL 사용해 보고 구체적인 메시지 스펙 참고 후에 결정
